# name of the project
hello-world:
  
  # connection to the database
  database:
    host:               server.example.com:27017
    authSource:         admin
    authMechanism:      SCRAM-SHA-1

    username:           username              # username and password are in a raw form
    password:           password              # make sure this file is properly protected
                                              # i.e. chmod 0400
    
  # database and collection name
  artifacts:
    db_name:            hello-world           # where to store results, from where to load them
    col_timers_name:    timers                # collection where benchmark results are stored in
    col_files_name:     files                 # for future work, where the logs are stored
  
  # configuration of the artifacts visualisation preprocessing 
  visualisation:                              # aggregation pipiline block
  
    - $unwind:          $libs                 # Deconstructs an array field from the input 
                                              # documents to output a document for each element
                                              # more info:
                          # https://docs.mongodb.com/manual/reference/operator/aggregation/unwind/
                          
    - $project:                               # Passes along the documents with the requested 
                                              # fields to the next stage in the pipeline.
                                              # 
                                              # The specified fields can be existing fields
                                              # from the input documents or newly computed fields
                                              # more info:
                          # https://docs.mongodb.com/manual/reference/operator/aggregation/project/

        timers:         $timers               # will include fields 'timers' in the result
        duration:       $result.duration      # will map fields 'result.duration' to just 'duration'
        git-branch:     $libs.branch
        git-commit:     $libs.commit
        git-datetime:   $libs.datetime
        git-timestamp:  $libs.timestamp
        
        test-name:      $problem.test-name
        case-name:      $problem.case-name
